import { guessFileType, ConfigSource, EnvironmentVariableNotFoundError, } from '@app-config/core';
import { logger } from '@app-config/logging';
/** Read configuration from an environment variable */
export class EnvironmentSource extends ConfigSource {
    constructor(variableName) {
        super();
        this.variableName = variableName;
    }
    async readContents() {
        const value = process.env[this.variableName];
        if (!value) {
            throw new EnvironmentVariableNotFoundError(`Could not read the environment variable '${this.variableName}'`, this.variableName);
        }
        const inferredFileType = await guessFileType(value);
        logger.verbose(`EnvironmentSource guessed that ${this.variableName} is ${inferredFileType} FileType`);
        return [value, inferredFileType];
    }
}
//# sourceMappingURL=environment-source.js.map